<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A group of functions for exploring music theory, trough
    transformations of elementay blocks. Technically, the package aims at
    experimenting and demonstrating various tools and guidelines.
    This includes OOP (S3, with vctrs and tibble subclassing), strong control
    of user input and types (rlang), pure fonctionnal approach. Efforts are made 
    on providing verbs and logic to use intuitively in a tidyverse way, and on
    throwing informative and nice errors (with the cli package). ">
<title>Explore Music Theory With Opinionated Functions • music</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Explore Music Theory With Opinionated Functions">
<meta property="og:description" content="A group of functions for exploring music theory, trough
    transformations of elementay blocks. Technically, the package aims at
    experimenting and demonstrating various tools and guidelines.
    This includes OOP (S3, with vctrs and tibble subclassing), strong control
    of user input and types (rlang), pure fonctionnal approach. Efforts are made 
    on providing verbs and logic to use intuitively in a tidyverse way, and on
    throwing informative and nice errors (with the cli package). ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">music</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/music.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/WIP.html">Work In Progress</a>
    <a class="dropdown-item" href="articles/modes_5.html">modes_5</a>
    <a class="dropdown-item" href="articles/modes_7.html">modes_7</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="music">music<a class="anchor" aria-label="anchor" href="#music"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of music has two sides:</p>
<ul>
<li>explore music theory through opinionated declarative functions;</li>
<li>explore R programming and demonstrate some development skills.</li>
</ul>
<p>See the <a href="#extra">Extra</a> section for a more detailed description.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of music like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="http://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"c-marc/music"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Start with notes C, F and A, and assume root note is D.</li>
<li>Add the role each of these note play.</li>
<li>Transform the index so that it now relates to half-tones.</li>
<li>Show the first <em>inversion</em> of that chord (starting on its second note).</li>
<li>Compute intervals.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">music</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'music'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:utils':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     example</span></span>
<span></span>
<span><span class="fu"><a href="reference/start_with_some_notes.html">start_with_some_notes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C"</span>, <span class="st">"F"</span>, <span class="st">"A"</span><span class="op">)</span>, root_note <span class="op">=</span> <span class="st">"D"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_roles.html">add_roles</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/set_unit_to_1.html">set_unit_to_1</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/set_first.html">set_first</a></span><span class="op">(</span>rank <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">idx</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span><span class="co">#&gt;            idx note  role  intervals</span></span>
<span><span class="co">#&gt;   &lt;i&lt;(0)1/12&gt;&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1           -5 A     P5            0</span></span>
<span><span class="co">#&gt; 2           -2 C     m7            3</span></span>
<span><span class="co">#&gt; 3            3 F     m3            5</span></span></code></pre></div>
<p>This is (D)-7/A: rootless D minor 7 played over A…</p>
</div>
<div class="section level2">
<h2 id="extra">Extra<a class="anchor" aria-label="anchor" href="#extra"></a>
</h2>
<div class="section level3">
<h3 id="music-theory">Music theory<a class="anchor" aria-label="anchor" href="#music-theory"></a>
</h3>
<p>This is an interesting subject to play with for the following reasons:</p>
<ul>
<li><p>It involves a meaningful subject to play with, and one can actually learn some things while playing with data and functions. Yet no specific knowledge is required here, and the implementation is simple enough to be used in an abstract way.</p></li>
<li>
<p>In the scope of this package, it involves two supplementary interesting features for exploration learning and/or teaching programming skills:</p>
<ol style="list-style-type: decimal">
<li><p>It relies on <strong>simple blocks</strong>. Each of these blocks is quite small (generally up to 12 rows and 1-3 columns). Each of these block can be used on its own or combined with the others.</p></li>
<li><p>It involves <strong>strong logic</strong>. That means there’s a lot to experiment with, from transforming to joining these blocks. Or rebuilding some just by using the others.</p></li>
</ol>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="programming">Programming<a class="anchor" aria-label="anchor" href="#programming"></a>
</h3>
<div class="section level4">
<h4 id="general-goals">General goals<a class="anchor" aria-label="anchor" href="#general-goals"></a>
</h4>
<p>This package has the following general goals:</p>
<ul>
<li>to provide a framework with declarative and pure functions that can be used intuitively with basic <em>tidyverse</em> skills</li>
<li>to provide a carefully crafted package:
<ul>
<li>strong checking of users inputs, and informative messaging;</li>
<li>decent documentation;</li>
<li>nice and organised coding.</li>
</ul>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="programming-topics-or-skills">Programming topics or skills<a class="anchor" aria-label="anchor" href="#programming-topics-or-skills"></a>
</h4>
<p>It implements:</p>
<ul>
<li>OOP in S3 framework, with subclasses of <code>vctrs</code> and <code>tibbles</code>;</li>
<li>pretty interactions with <code>cli</code>;</li>
<li>some features requiring programming with <em>tidy-selection</em>, <em>data-masking</em>, and <em>glue injections</em>;</li>
<li>recursive functions;</li>
<li>dangerous arithmetic (especially for non interactive use);</li>
<li>unit testing, and safe programming by being quite strict with types, objects and arguments checking…</li>
</ul>
</div>
<div class="section level4">
<h4 id="design-choices">Design choices<a class="anchor" aria-label="anchor" href="#design-choices"></a>
</h4>
<p>Main design choices are:</p>
<div class="section level5">
<h5 id="for-objects">For objects:<a class="anchor" aria-label="anchor" href="#for-objects"></a>
</h5>
<ul>
<li>implement a powerful index class that can deal with periodicity and be transformed;</li>
<li>implement a subclass of a tibble with that index as a column;</li>
</ul>
</div>
<div class="section level5">
<h5 id="for-functions">For functions<a class="anchor" aria-label="anchor" href="#for-functions"></a>
</h5>
<p>We define 3 levels:</p>
<ol style="list-style-type: decimal">
<li>Low level functions are internal…</li>
<li>Mild level functions are in the NAMESPACE: they make available some operations to the user. They require some knowledge to be called meaningfully. And they usually must be sequenced with each other, with joining, and arranging… They require to explicitly unlock the data.</li>
<li>Higher-order functions should work without much thinking from the user and show strong stability over time, hiding potential underlying changes. They can operate on locked data.</li>
</ol>
</div>
<div class="section level5">
<h5 id="for-data">For data<a class="anchor" aria-label="anchor" href="#for-data"></a>
</h5>
<p>We experiment an idea of data <em>as functions</em>. This is very simple in that it just wraps data objects behind a proxy function. Our motivations for such a choice are that:</p>
<ul>
<li>this <em>shielding</em> of data behind function brings safety for interactive use. Even though our functions are pure, this encourages the user to call reproducible data (blocks). It’s just an assignment away. But as most problems should be solvable in just a few lines, these original blocks do not need to be tempered with. An intermediary assignment will sometimes makes a solution clearer, but most piping sequence are encouraged to start with these blocks.</li>
<li>this blurs the distinction between hard coded data and some blocks that can be built on the fly. Something we want to take advantage of. This allows extensions without actually adding data: other <em>blocks</em> can be proposed as arguments through limited getting functions; these can be a view of a block, pre-assembled blocks, modified blocks, etc… This should fit with our approach of using a limited set of clear and intuitive verbs. This functional approach wraps the OOP parts (it actually promotes the top level methods of the richest objects).</li>
</ul>
</div>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=music" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing music</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Marc Carpentier <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marc Carpentier.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
